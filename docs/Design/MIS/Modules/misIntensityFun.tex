\section{Emotion Intensity Function Module (\mref{mIntensityFun}):
EmIntensityCalcLib}\label{intensityFunModule}
The Emotion Intensity Function Library collects methods for calculating emotion
intensity changes $\responsestrength$. Each emotion in EmotionTypesT
(Section~\ref{emotionstateModule}) has its own function to make it easier to
use, reuse, and/or modify them individually.

The functions are application-specific, as they are modelled on specific
emotion theories and \progname{} assumptions.

\subsection{Uses}
\begin{itemize}[noitemsep, nosep]

    \item EmotionIntensityT (Section~\ref{intensityModule})

    \item ITime(T, U) (Section~\ref{timeModule})

    \item IWorld(T) (Section~\ref{worldstateModule})

    \item GoalT(T) (Section~\ref{goalModule})

    \item PlanT(T) (Section~\ref{planModule})

    \item IAttention(U) (Section~\ref{attentionModule})

    \item SocialAttachmentT (Section~\ref{socialModule})

\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Programs}

\begin{center}
    \renewcommand{\arraystretch}{1.1}
    \begin{tabular}{m{0.23\linewidth} m{0.22\linewidth} m{0.18\linewidth}
    m{0.27\linewidth}}
        \toprule
        \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
        \midrule

        \rowcolor[gray]{0.9}CalcJoyIntensity & WorldStateT(T), WorldEventT(T),
        GoalT(T) & EmIntensityChgT & -- \\

        CalcSadnessIntensity & WorldStateT(T), WorldEventT(T), GoalT(T) &
        EmIntensityChgT & -- \\

        \rowcolor[gray]{0.9}CalcFearIntensity & WorldStateT(T), WorldEventT(T),
        GoalT(T) & EmIntensityChgT & -- \\

        CalcAngerIntensity & WorldStateT(T), WorldEventT(T), GoalT(T) &
        EmIntensityChgT & -- \\

        \rowcolor[gray]{0.9}CalcDisgustIntensity & WorldStateT(T),
        WorldEventT(T), GoalT(T) & EmIntensityChgT & -- \\

        CalcAcceptanceIntensity & SocialAttachmentT, \newline
        EmIntensityChgT, $\mathbb{R}_{[0, 1]}$ & EmIntensityChgT &
        W-EIG\_NO\_RELATION, \newline E-EIG\_BAD\_RATIO \\

        \rowcolor[gray]{0.9}CalcInterestIntensity & AttentionT(U), \newline
        EmIntensityChgT, $\mathbb{R}_{[0, 1]}$ & EmIntensityChgT &
        E-EIG\_BAD\_RATIO \\

        CalcSurpriseIntensity & DeltaTimeT(U), $\mathbb{R}_{>0}$ &
        EmIntensityChgT & E-EIG\_BAD\_TOLERANCE \\

        \bottomrule
    \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{Access Routine Semantics}

\noindent CalcJoyIntensity($\mathit{wState}$, $\mathit{wEvent}$, $g$):
\begin{itemize}

    \item output: $out := g.\text{Dist2GoalChg}(\mathit{wState},
    \mathit{wEvent}) \cdot g.importance()$

    \item exception: None

\end{itemize}

\noindent CalcSadnessIntensity($\mathit{wState}$, $\mathit{wEvent}$, $g$):
\begin{itemize}

    \item output: $out := g.\text{Dist2GoalChg}(\mathit{wState},
    \mathit{wEvent}) \cdot g.importance()$

    \item exception: None

\end{itemize}

\noindent CalcFearIntensity($\mathit{wState}$, $\mathit{wEvent}$, $g$):
\begin{itemize}

    \item output: $out := g.\text{Dist2GoalChg}(\mathit{wState},
    \mathit{wEvent}) \cdot g.importance()$

    \item exception: None

\end{itemize}

\noindent CalcAngerIntensity($\mathit{wState}$, $\mathit{wEvent}$, $g$):
\begin{itemize}

    \item output: $out := g.\text{Dist2GoalChg}(\mathit{wState},
    \mathit{wEvent}) \cdot g.importance()$

    \item exception: None

\end{itemize}

\noindent CalcDisgustIntensity($\mathit{wState}$, $\mathit{wEvent}$, $g$):
\begin{itemize}

    \item output: $out := g.\text{Dist2GoalChg}(\mathit{wState},
    \mathit{wEvent}) \cdot g.importance()$

    \item exception: None

\end{itemize}

\noindent CalcAcceptanceIntensity($\mathit{relationToA}$, $\mathit{tolerance}$,
$\mathit{ratio}$):
\begin{itemize}

    \item output: $out := {\mathlarger\sum_{i = 0}^{\mathit{Rel}}}
    \mathit{ratio}^S \cdot \mathit{tolerance}$\vspace*{0.3em}
    \begin{nospaceflalign*}
        \text{where }\mathit{Rel} &=
        \dfrac{\mathit{relationToA}.\text{GetAttachmentLevel()}}{\mathit{relationToA}.\text{GetAttachmentLevelUpSize()}}
        &\\
        \text{and } S &= i \cdot
        \mathit{relationToA}.\text{GetAttachmentLevelUpSize()}
    \end{nospaceflalign*}

    \item \parbox[t]{\linewidth}{\vspace*{-1.2em}\begin{nospaceflalign*}
            \text{exception: } \mathit{exc := } \, ( \; \mathit{relationToA} =
            \emptyset &\Rightarrow \text{W-EIG\_NO\_RELATION} &\\
            | \; \mathit{tolerance} < 0 &\Rightarrow
            \text{E-EIG\_BAD\_TOLERANCE} \; )
        \end{nospaceflalign*}
    }

\end{itemize}

\clearpage
\noindent CalcInterestIntensity($\mathit{attentionToX}$, $\mathit{tolerance}$,
$\mathit{ratio}$):
\begin{itemize}

    \item output: $out := {\mathlarger\sum_{i = 0}^{\mathit{Att}}}
    \mathit{ratio}^S \cdot \mathit{tolerance}$\vspace*{0.3em}
    \begin{nospaceflalign*}
        \text{where }\mathit{Att} &=
        \dfrac{\mathit{attentionToX}.\text{GetTimeAttended()}}{\mathit{attentionToX}.\text{GetAttendStepSize()}}
         &\\
        \text{and } S &= i \cdot
        \mathit{attentionToX}.\text{GetAttendStepSize()}
    \end{nospaceflalign*}

    \item exception: $exc := \left( \, \mathit{tolerance} < 0 \Rightarrow
    \text{E-EIG\_BAD\_RATIO} \, \right)$

\end{itemize}

\noindent CalcSurpriseIntensity($\mathit{tDelta}$, $\mathit{tolerance}$):
\begin{itemize}

    \item output: $out := \dfrac{1}{\mathit{tolerance} \cdot \mathit{tDelta}}$

    \item exception: $exc := \left( \, \mathit{tolerance} < 0 \Rightarrow
    \text{E-EIG\_BAD\_TOLERANCE} \, \right)$

\end{itemize}